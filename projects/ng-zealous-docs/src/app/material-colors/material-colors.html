<z-demo-title />

<div class="app-material-colors__controls">
  <mat-form-field appearance="outline">
    <mat-label>Filter</mat-label>
    <input
      matInput
      placeholder="Enter a role"
      (input)="roleFilter.set(roleFilterInput.value)"
      #roleFilterInput
    />
    <mat-icon matSuffix>search</mat-icon>
  </mat-form-field>

  <div class="app-material-colors__sub-controls">
    <mat-slide-toggle
      [checked]="showCssVariable"
      (toggleChange)="showCssVariable = !showCssVariable"
    >
      Show CSS variable
    </mat-slide-toggle>

    <mat-slide-toggle
      [checked]="displayHexColor"
      (toggleChange)="displayHexColor = !displayHexColor"
    >
      Display color in hexadecimal
    </mat-slide-toggle>
  </div>
</div>

@for (colors of materialColorsMapFiltered(); track colors.heading) {
  <h2 class="app-material-colors__heading">{{ colors.heading }}</h2>

  <div class="app-material-colors__content">
    @for (role of colors.roles; track role; let last = $last) {
      @let cssVariable = `var(--mat-sys-${role})`;

      <div [style.background-color]="cssVariable" #element></div>

      <div class="app-material-colors__role" [class.app-material-colors__role--last]="last">
        <button
          class="z-sys-reset"
          matTooltip="Copy to clipboard"
          matTooltipPosition="left"
          (click)="toClipboard(cssVariable)"
        >
          @if (showCssVariable) {
            <span class="app-material-colors__role-dim">var(--mat-sys-</span>{{ role
            }}<span class="app-material-colors__role-dim">)</span>
          } @else {
            {{ role }}
          }
        </button>

        @if (element | elementToBgColor: displayHexColor; as bgColor) {
          <button
            class="app-material-colors__code"
            matButton
            matTooltip="Copy to clipboard"
            matTooltipPosition="right"
            (click)="toClipboard(bgColor)"
          >
            {{ bgColor }}
          </button>
        }
      </div>
    }
  </div>
} @empty {
  <div class="app-material-colors__empty">
    <mat-icon>palette</mat-icon>
    Sorry, no role found...
  </div>
}
