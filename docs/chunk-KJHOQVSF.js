import{a as oe,b as ae,c as ne,d as re}from"./chunk-VGM5MYGW.js";import{a as te,b as ie}from"./chunk-AIPPXDSG.js";import{a as se}from"./chunk-WREUUIFI.js";import{a as O,d as q}from"./chunk-2WHJBXHL.js";import"./chunk-R7L22SWI.js";import{a as Q}from"./chunk-65PWGCZ2.js";import{f as Y,i as $,k as G,l as K}from"./chunk-CU4O7CPC.js";import"./chunk-VHGWASOJ.js";import{a as X}from"./chunk-VHQ5YDZB.js";import{b as ee}from"./chunk-DYUC7V3Q.js";import{$b as U,Aa as a,Gb as _,Hb as N,Ib as l,Kb as k,La as v,Mb as B,Nb as P,Nc as W,Ob as F,Oc as J,Pb as j,Qb as L,Rb as R,X as m,_a as I,a as y,aa as x,ab as w,ba as u,bb as Z,cb as S,eb as E,fa as A,ga as C,gc as H,hb as D,ib as T,jb as c,kb as o,lb as s,ma as h,na as g,oa as M,rb as f,tb as b,ub as d,ya as V}from"./chunk-Q6FETACP.js";var le={critical:!0,serious:!0,moderate:!0,minor:!1};var z=class n{impacts=H.required({});form=m(G).group({critical:[!0],serious:[!0],moderate:[!0],minor:[!0]});constructor(){g(()=>{Object.entries(this.impacts()).filter(([e,i])=>this.form.value[e]!==i).length&&this.form.setValue(this.impacts())}),this.form.valueChanges.pipe(X()).subscribe(()=>{this.impacts.set(this.form.value)})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=v({type:n,selectors:[["z-axe-impact-selector"]],hostAttrs:[1,"z-axe-impact-selector"],inputs:{impacts:[1,"impacts"]},outputs:{impacts:"impactsChange"},decls:10,vars:4,consts:[[1,"z-axe-impact-selector__block"],[3,"formControl"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"mat-checkbox",1),l(2,"Critical"),s(),o(3,"mat-checkbox",1),l(4,"Serious"),s()(),o(5,"div",0)(6,"mat-checkbox",1),l(7,"Moderate"),s(),o(8,"mat-checkbox",1),l(9,"Minor"),s()()),e&2&&(a(),c("formControl",i.form.controls.critical),a(2),c("formControl",i.form.controls.serious),a(3),c("formControl",i.form.controls.moderate),a(2),c("formControl",i.form.controls.minor))},dependencies:[K,Y,$,re,ne],styles:[`.z-axe-impact-selector{padding:.5rem;display:flex}.z-axe-impact-selector__block{flex-basis:50%;display:flex;flex-direction:column}
`],encapsulation:2})};var pe=(n,t)=>t.id;function xe(n,t){if(n&1){let e=f();o(0,"article",9)(1,"button",10),b("click",function(){let r=x(e).$implicit,p=d(2);return u(p.toggleHighlighted(r))}),l(2),s(),o(3,"span"),l(4),s(),o(5,"a",11)(6,"mat-icon",12),l(7,"open_in_new"),s()()()}if(n&2){let e=t.$implicit;d();let i=R(6);_("z-axe-violations__item--active",(i==null?null:i.result)===e),a(),_("z-axe-violations__reveal--active",(i==null?null:i.result)===e),a(),k(" ",e.description," "),a(),N(`z-axe-violations__badge z-axe-violations__badge--${e.impact} z-sys-label-small`),a(),k(" ",e.impact," "),a(),I("aria-label",e.help),c("href",e.helpUrl,V)}}function ue(n,t){n&1&&(o(0,"article",7)(1,"mat-icon"),l(2,"editor_choice"),s(),l(3," Everything looks good. "),s())}function ge(n,t){if(n&1){let e=f();o(0,"section",0),Z("z-axe-violations__container--leave"),w("z-axe-violations__container--enter"),o(1,"header",4),l(2," Accessibility issues "),o(3,"button",5),b("click",function(){x(e);let r=d();return u(r.axeRunner.run())}),o(4,"mat-icon"),l(5,"refresh"),s()()(),j(6),D(7,xe,8,10,"article",6,pe,!1,ue,4,0,"article",7),o(10,"z-axe-impact-selector",8),F("impactsChange",function(r){x(e);let p=d();return P(p.impacts,r)||(p.impacts=r),u(r)}),s()()}if(n&2){let e=d();a(6),L(e.highlighted()),a(),T(e.selectedViolations()),a(3),B("impacts",e.impacts)}}var ce=class n{axeRunner=m(se);document=m(A);hidden=m(Q).focus;visible=h(!1,{});highlighted=h(void 0,{});impacts=h(this.restoreImpacts(),{});selectedViolations=U(()=>{let t=this.impacts();return this.axeRunner.violations().filter(({impact:e})=>!e||t[e])},{});constructor(){g(()=>{this.selectedViolations();let t=M(()=>this.highlighted()?.selectors);t&&(this.highlight("remove",t),this.highlighted.set(void 0))}),g(()=>this.storeImpacts(this.impacts())),m(C).onDestroy(()=>this.toggleHighlighted())}togggleVisible(){this.visible.update(t=>!t)}toggleHighlighted(t){let e=this.highlighted();if(e&&(this.highlight("remove",e.selectors),this.highlighted.set(void 0)),!t||t===e?.result)return;let i=t.nodes.map(({target:r})=>r.join(", ")).join(", ");this.highlight("add",i),this.highlighted.set({result:t,selectors:i})}highlight(t,e){this.document.querySelectorAll(e).forEach(i=>i.classList[t]("z-axe-violations-highlight"))}restoreImpacts(){let t=le;try{return y(y({},t),JSON.parse(this.document.defaultView?.localStorage?.getItem("z-axe-violations-impacts")??""))}catch{return t}}storeImpacts(t){this.document.defaultView?.localStorage?.setItem("z-axe-violations-impacts",JSON.stringify(t))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=v({type:n,selectors:[["z-axe-violations"]],hostAttrs:["role","region",1,"z-axe-violations"],hostVars:2,hostBindings:function(e,i){e&2&&_("z-axe-violations--hidden",i.hidden)},decls:5,vars:4,consts:[[1,"z-axe-violations__container"],[1,"z-axe-violations__trigger"],["type","button","aria-label","Axe panel","matTooltip","Axe panel","matTooltipPosition","left","matIconButton","",1,"z-axe-violations__trigger-btn",3,"click"],["matBadgeOverlap","false",3,"matBadge"],[1,"z-axe-violations__header","z-sys-title-large"],["aria-label","Run Axe analysis","type","button","matIconButton","",3,"click"],[1,"z-axe-violations__item","z-sys-label-large",3,"z-axe-violations__item--active"],[1,"z-axe-violations__item","z-axe-violations__item--no-issue","z-sys-label-large"],[1,"z-axe-violations__impacts",3,"impactsChange","impacts"],[1,"z-axe-violations__item","z-sys-label-large"],["type","button",1,"z-axe-violations__reveal","z-sys-reset",3,"click"],["target","_blank","matIconButton","",1,"z-axe-violations__help",3,"aria-label","href"],["zIcon","","size","xs"]],template:function(e,i){if(e&1){let r=f();S(0,ge,11,3,"section",0),o(1,"div",1)(2,"button",2),b("click",function(){return x(r),u(i.togggleVisible())}),o(3,"mat-icon",3),l(4,"accessibility_new"),s()()()}if(e&2){E(i.visible()?0:-1);let r=i.selectedViolations().length;a(2),_("z-axe-violations__trigger-btn--has-violations",r),a(),c("matBadge",r||null)}},dependencies:[ae,oe,q,O,J,W,ie,te,ee,z],styles:[`.z-axe-overlay{z-index:999999}.z-axe-violations--hidden{display:none}.z-axe-violations-highlight{outline:4px dashed var(--mat-sys-error)!important;outline-offset:-2px!important}.z-axe-violations__container{position:fixed;z-index:1;bottom:0;right:0;width:380px;max-width:100%;max-height:65%;overflow:auto;box-shadow:var(--mat-sys-level4);border-top-left-radius:.5rem;border:solid var(--mat-sys-outline-variant);border-width:1px 0 0 1px;background-color:var(--mat-sys-surface)}.z-axe-violations__container--enter{animation:zAxeViolationsContainerEnter .25s ease-out}.z-axe-violations__container--leave{animation:zAxeViolationsContainerLeave .25s ease-in}.z-axe-violations__header{position:sticky;z-index:1;top:0;display:flex;justify-content:space-between;align-items:center;padding:.5rem 1rem;border-bottom:1px solid var(--mat-sys-surface-container-highest);color:var(--mat-sys-on-surface);background-color:var(--mat-sys-surface-container)}.z-axe-violations__item{display:flex;gap:.5rem;justify-content:space-between;align-items:center;border-bottom:1px solid var(--mat-sys-surface-container-highest);padding-inline:1rem;transition:background-color .15s ease}.z-axe-violations__item--active{background-color:var(--mat-sys-error-container)}.z-axe-violations__item--no-issue{justify-content:flex-start;padding-block:.75rem;color:var(--mat-sys-on-surface-variant)}.z-axe-violations__reveal{flex-grow:1;padding-block:.5rem;padding-right:.5rem;transition:color .15s ease;cursor:zoom-in}.z-axe-violations__reveal--active{color:var(--mat-sys-on-error-container);cursor:zoom-out}.z-axe-violations__badge{border-radius:99px;padding:.06rem .4rem;text-wrap:nowrap;background-color:var(--z-axe-violations-badge-background-color);color:var(--z-axe-violations-badge-color)}.z-axe-violations__badge--critical{--z-axe-violations-badge-background-color: oklch(50.5% .213 27.518);--z-axe-violations-badge-color: oklch(93.6% .032 17.717)}.z-axe-violations__badge--serious{--z-axe-violations-badge-background-color: oklch(55.4% .135 66.442);--z-axe-violations-badge-color: oklch(97.3% .071 103.193)}.z-axe-violations__badge--moderate{--z-axe-violations-badge-background-color: oklch(45.7% .24 277.023);--z-axe-violations-badge-color: oklch(93% .034 272.788)}.z-axe-violations__badge--minor{--z-axe-violations-badge-background-color: oklch(51.1% .096 185.391);--z-axe-violations-badge-color: oklch(95.3% .051 180.801)}.z-axe-violations__help{margin-block:.5rem}.z-axe-violations__impacts{margin-right:3rem}.z-axe-violations__trigger{position:fixed;z-index:2;bottom:.3rem;right:1rem}.z-axe-violations__trigger-btn{transition:color .25s ease}.z-axe-violations__trigger-btn--has-violations{--mat-icon-button-icon-color: var(--mat-sys-error)}@keyframes zAxeViolationsContainerEnter{0%{transform:translateY(100%)}}@keyframes zAxeViolationsContainerLeave{to{transform:translateY(100%)}}
`],encapsulation:2})};export{ce as ZAxeViolations};
